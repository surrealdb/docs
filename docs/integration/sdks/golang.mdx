---
sidebar_position: 5
---

import TableComponent from '../../../src/components/TableData/TableComponent';
import { data } from '../../../src/components/TableData/GolangSDK/TableData';
import GolangLogo from '../../../static/img/golang-icon.png';

# Golang

# <img src={GolangLogo} width="50"/>  Golang SDK for SurrealDB

The SurrealDB library for Golang enables to use the SurrealDB database in your Golang applications.

For more information about the SurrealDB Go SDK API, see the documentation.

To contribute to this documentation, edit this file on GitHub.

To contribute to the SDK code, submit an Issue or Pull Request here.


### Create Module

First we need to create module if it is not exist

```bash
go mod init github.com/$username/$projectname
```

### Install the library

First, install the SurrealDB library using go get:

```
go get github.com/surrealdb/surrealdb.go
```
### Connect to SurrealDB

Create a new main.go file and add the following code to try out some basic operations using the SurrealDB SDK.

```go
package main

import (
	"github.com/surrealdb/surrealdb.go"
)

type User struct {
	ID      string `json:"id,omitempty"`
	Name    string `json:"name"`
	Surname string `json:"surname"`
}

func main() {
	db, err := surrealdb.New("ws://localhost:8000/rpc")
	if err != nil {
		panic(err)
	}

	if _, err = db.Signin(map[string]interface{}{
		"user": "root",
		"pass": "root",
	}); err != nil {
		panic(err)
	}

	if _, err = db.Use("test", "test"); err != nil {
		panic(err)
	}

	// Create user
	user := User{
		Name:    "John",
		Surname: "Doe",
	}

	// Insert user
	data, err := db.Create("user", user)
	if err != nil {
		panic(err)
	}

	// Unmarshal data
	createdUser := make([]User, 1)
	err = surrealdb.Unmarshal(data, &createdUser)
	if err != nil {
		panic(err)
	}

	// Get user by ID
	data, err = db.Select(createdUser[0].ID)
	if err != nil {
		panic(err)
	}

	// Unmarshal data
	selectedUser := new(User)
	err = surrealdb.Unmarshal(data, &selectedUser)
	if err != nil {
		panic(err)
	}

	// Change part/parts of user
	changes := map[string]string{"name": "Jane"}
	if _, err = db.Change(selectedUser.ID, changes); err != nil {
		panic(err)
	}

	// Update user
	if _, err = db.Update(selectedUser.ID, changes); err != nil {
		panic(err)
	}

	if _, err = db.Query("SELECT * FROM $record", map[string]interface{}{
		"record": createdUser[0].ID,
	}); err != nil {
		panic(err)
	}

	// Delete user by ID
	if _, err = db.Delete(selectedUser.ID); err != nil {
		panic(err)
	}

}
```

### Library methods

The Golang library comes with a number of built-in functions.

<TableComponent data={data} />

<div className='layout-group'>

<div id="New" className='code'>
    <span>surrealdb</span>
    <span className='punctuation'>.</span>
    <span className='function'>New</span>
    <span>(url, options...)</span>
    <span>()</span>
</div>

Connects to a remote database endpoint.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>url</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The URL of the database endpoint to connect to. Examples may include http://hostname:8000 or ws://hostname:8000/rpc .
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>options</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                Set SurrealDB clients options such as Timeout etc.
            </td>
        </tr>
    </tbody>
</table>

```surql
// Connect to a local endpoint
surrealdb.New("ws://localhost:8000/rpc");
// Connect to a remote endpoint
surrealdb.New("ws://cloud.surrealdb.com/rpc");
```
</div>


<div className='layout-group'>

<div className='heading'>
    <div id="Close" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>Close</span>
        <span>()</span>
    </div>
</div>

Closes the persistent connection to the database.

```surql
db.Close();
```
</div>


<div className='layout-group'>

<div id="Use" className='code'>
    <span>db</span>
    <span className='punctuation'>.</span>
    <span className='function'>Use</span>
    <span>(namespace, database)</span>
</div>

Switch to a specific namespace and database.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>ns</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Switches to a specific namespace.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>db</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Switches to a specific database.
            </td>
        </tr>
    </tbody>
</table>

```surql
db.Use("happy-hippo-staging", "my-service")
```
</div>


<div className='layout-group'>

<div id="Signup" className='code'>
    <span>db</span>
    <span className='punctuation'>.</span>
    <span className='function'>Signup</span>
    <span>(vars)</span>
</div>

Signs up to a specific authentication scope.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>vars</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Variables used in a signup query.
            </td>
        </tr>
    </tbody>
</table>

```js
db.Signup(map[string]string{
	"NS": "clear-crocodile-production",
	"DB": "web-scraping-application",
	"SC": "user",
	"email": "info@surrealdb.com",
	"pass": "123456",
})
```

</div>


<div className='layout-group'>

<div id="Signin" className='code'>
    <span>db</span>
    <span className='punctuation'>.</span>
    <span className='function'>Signin</span>
    <span>(vars)</span>
</div>

Signs in to a specific authentication scope.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>vars</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Variables used in a signin query.
            </td>
        </tr>
    </tbody>
</table>

```js
db.Signin(map[string]string{
	"user": "root",
	"pass": "root",
})
```

</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Invalidate" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>Invalidate</span>
        <span>()</span>
    </div>
</div>

Invalidates the authentication for the current connection. Invalidates close the authenticated connection.

```surql
db.invalidate();
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Authenticate" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>Authenticate</span>
        <span>(token)</span>
    </div>
</div>

Authenticates the current connection with a JWT token.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>token</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The JWT authentication token.
            </td>
        </tr>
    </tbody>
</table>

```surql
db.Authenticate("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJTdXJyZWFsREIiLCJpYXQiOjE1MTYyMzkwMjIsIm5iZiI6MTUxNjIzOTAyMiwiZXhwIjoxODM2NDM5MDIyLCJOUyI6InRlc3QiLCJEQiI6InRlc3QiLCJTQyI6InVzZXIiLCJJRCI6InVzZXI6dG9iaWUifQ.N22Gp9ze0rdR06McGj1G-h2vu6a6n9IVqUbMFJlOxxA");
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Let" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>Let</span>
        <span>(key, val)</span>
    </div>
</div>

Assigns a value as a parameter for this connection.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>key</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Specifies the name of the variable.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>val</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Assigns the value to the variable name.
            </td>
        </tr>
    </tbody>
</table>

```surql
// Assign the variable on the connection
db.Let("name", map[string]string{
		"first": "ElecTwix",
		"last": "Morgan Hitchcock",
});
// Use the variable in a subsequent query
db.Query("CREATE person SET name = $name", nil);
// Use the variable in a subsequent query
db.Query("SELECT * FROM person WHERE name.first = $name.first", nil);
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Query" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>Query</span>
        <span>(sql, vars)</span>
    </div>
</div>

Runs a set of SurrealQL statements against the database.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>sql</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Specifies the SurrealQL statements.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>vars</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                Assigns variables which can be used in the query.
            </td>
        </tr>
    </tbody>
</table>

```surql
// Assign the variable on the connection
result, err := db.Query("CREATE person; SELECT * FROM type::table($tb);", map[string]string{
	"tb": "person"
});
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Create" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>Create</span>
        <span>(thing, data)</span>
    </div>
</div>

Creates a record in the database.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>thing</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or the specific record ID to create.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The document / record data to insert.
            </td>
        </tr>
    </tbody>
</table>

```surql
// Create a record with a random ID
db.Create("person", map[string]interface{}{})

// Create a record with a specific ID w/ a map
db.Create("person:tobie", map[string]interface{}{
	"name": "Tobie",
	"settings": map[string]bool{
		"active":    true,
		"marketing": true,
	},
})

// Create a record with a specific ID w/ a struct
type Person struct {
	Name     string
	Surname  string
	Settings settings
}

type settings struct {
	Active    bool
	Marketing bool
}

data := Person{
	Name: "Hugh",
	Settings: settings{
		Active:    true,
		Marketing: true,
	},
}

db.Create("person:hugh", data)
```

This function will run the following query in the database:

```surql
CREATE $thing CONTENT $data;
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Select" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>Select</span>
        <span>(what)</span>
    </div>
</div>

Selects all records in a table, or a specific record, from the database.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>thing</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or a record ID to select.
            </td>
        </tr>
    </tbody>
</table>

```surql
// Select all records from a table
db.Select("person");
// Select a specific record from a table
db.Select("person:h5wxrf2ewk8xjxosxtyc");
```

This function will run the following query in the database.

```surql
SELECT * FROM $thing;
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Update" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>Update</span>
        <span>(what, data)</span>
    </div>
</div>

Updates all records in a table, or a specific record, in the database.

:::note
<em>NOTE:</em> This function replaces the current document / record data with the specified data.
:::

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>thing</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or the specific record ID to update.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The document / record data to insert.
            </td>
        </tr>
    </tbody>
</table>

```surql
// Update all records in a table
db.Update("person");
// Update a record with a specific ID
db.Update("person:ElecTwix", map[string]interface{}{
	"name": "ElecTwix",
	"settings": map[string]bool{
		"active": true,
		"marketing": true,
	},
});
```

This function will run the following query in the database.

```surql
UPDATE $thing CONTENT $data;
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Change" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>Change</span>
        <span>(what, data)</span>
    </div>
</div>

Modifies all records in a table, or a specific record, in the database.

:::note
<em>NOTE:</em> This function merges the current document / record data with the specified data.
:::

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>thing</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or the specific record ID to change.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The document / record data to insert.
            </td>
        </tr>
    </tbody>
</table>

```surql
// Update all records in a table
db.Change("person", map[string]interface{}{
	"updated_at": time.Now(),
});
// Update a record with a specific ID
db.Change("person:tobie", map[string]interface{}{
	"updated_at": time.Now(),
	"settings": map[string]bool{
		"active": true,
	},
});
```

This function will run the following query in the database.

```surql
UPDATE $thing MERGE $data;
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Modify" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>Modify</span>
        <span>(what, data)</span>
    </div>
</div>

Applies JSON Patch changes to all records, or a specific record, in the database.

:::note
<em>NOTE:</em> This function patches the current document / record data with the specified JSON Patch data.
:::

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>thing</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or the specific record ID to modify.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The JSON Patch data with which to modify the records.
            </td>
        </tr>
    </tbody>
</table>

```surql
// Update all records in a table
db.Modify("person", []surrealdb.Patch{op: "replace", path: "/created_at", value: time.Now()})
// Update a record with a specific ID
db.Modify("person:tobie", []surrealdb.Patch{
	{op: "replace", path: "/settings/active", value: false},
	{op: "add", path: "/tags", value: []string{"developer", "engineer"}},
	{op: "remove", path: "/temp"},
})
```

This function will run the following query in the database.

```surql
UPDATE $thing PATCH $data;
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Delete" className='code'>
        <span>db</span>
        <span>.</span>
        <span className='function'>Delete</span>
        <span>(resource)</span>
    </div>
</div>

Deletes all records in a table, or a specific record, from the database.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>thing</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or a record ID to select.
            </td>
        </tr>
    </tbody>
</table>

```surql
// Delete all records from a table
db.Delete("person");
// Delete a specific record from a table
db.delete("person:h5wxrf2ewk8xjxosxtyc");
```

This function will run the following query in the database.

```surql
DELETE * FROM $thing;
```
</div>


<div className='layout-group'>

<div className='heading'>
    <div id="Unmarshal" className='code'>
        <span>surrealdb</span>
        <span>.</span>
        <span className='function'>Unmarshal</span>
        <span>(data, target)</span>
    </div>
</div>

Unmarshal loads a SurrealDB response into a struct. This function does not use generics.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The response from other queries.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>target</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The target struct to unmarshal the data into.
            </td>
        </tr>
    </tbody>
</table>

```surql
// a simple user struct
type testUser struct {
	surrealdb.Basemodel `table:"test"`
	Username            string `json:"username,omitempty"`
	Password            string `json:"password,omitempty"`
	ID                  string `json:"id,omitempty"`
}

// select a user
userData, err := db.Select("person:electwix")

var user testUser
err = surrealdb.Unmarshal(userData, &user)
```

</div>


<div className='layout-group'>

<div className='heading'>
    <div id="UnmarshalRaw" className='code'>
        <span>surrealdb</span>
        <span>.</span>
        <span className='function'>UnmarshalRaw</span>
        <span>(rawData, target)</span>
    </div>
</div>

UnmarshalRaw loads a raw SurrealQL response returned by Query into a struct. The raw response includes metadata that was not part of the intended query, such as duration of query.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>rawData</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Raw Query response.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>target</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The target struct that will be unmarshalled to.
            </td>
        </tr>
    </tbody>
</table>

```surql
// a simple user struct
type testUser struct {
	Username string `json:"username,omitempty"`
	Password string `json:"password,omitempty"`
	ID       string `json:"id,omitempty"`
}

username := "johnny"
password := "123"

// create test user with raw SurrealQL and unmarshal
userData, err := db.Query("create users:johnny set Username = $user, Password = $pass", map[string]interface{}{
	"user": username,
	"pass": password,
})

var userSlice []testUser
ok, err := surrealdb.UnmarshalRaw(userData, &userSlice)
```

</div>