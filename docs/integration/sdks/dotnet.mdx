---
sidebar_position: 8
---

import TableComponent from '../../../src/components/TableData/TableComponent';
import { data } from '../../../src/components/TableData/DotNetSDK/TableData';
import DotnetLogo from '../../../static/img/dotnet-icon.png';

# .NET


# <img src={DotnetLogo} width="50"/>  .NET SDK for SurrealDB

The SurrealDB SDK for .NET enables simple and advanced querying of a remote database from client or server-side code. Remote connections automatically reconnect when the connection is terminated.

To contribute to this documentation, edit this file on GitHub.

To contribute to the SDK code, submit an Issue or Pull Request here.

### Install the SDK

&bull; Create a new project using your favorite IDE (Visual Studio, JetBrains Rider, etc...) 

&bull; or use the dotnet new command.

Once ready, add the SurrealDB SDK to your dependencies:

```
dotnet add package SurrealDb.Net
```

### Connect to SurrealDB

Let's start by creating a new console app.

```
dotnet new console -o SurrealDbExample
cd SurrealDbExample
dotnet add package SurrealDb.Net
```

Open Program.cs and replace everything in there with the following code to try out some basic operations using the SurrealDB SDK.

```
using SurrealDb.Net;
using SurrealDb.Net.Models;
using SurrealDb.Net.Models.Auth;
using System.Text.Json;

var db = new SurrealDbClient("ws://localhost:8000/rpc");

await db.SignIn(new RootAuth { Username = "root", Password = "root" });
await db.Use("test", "test");

var person = new Person
{
	Title = "Founder & CEO",
	Name = new() { FirstName = "Tobie", LastName = "Morgan Hitchcock" },
	Marketing = true
};
var created = await db.Create("person", person);
Console.WriteLine(ToJsonString(created));

var updated = await db.Merge<ResponsibilityMerge, Person>(
	new() { Id = new Thing("person", "jaime"), Marketing = true }
);
Console.WriteLine(ToJsonString(updated));

var people = await db.Select<Person>("person");
Console.WriteLine(ToJsonString(people));

var queryResponse = await db.Query(
	"SELECT marketing, count() FROM type::table($table) GROUP BY marketing",
	new Dictionary<string, object> { { "table", "person" } } 
);
var groups = queryResponse.GetValue<List<Group>>(0);
Console.WriteLine(ToJsonString(groups));

static string ToJsonString(object? o)
{
	return JsonSerializer.Serialize(o, new JsonSerializerOptions
	{
		WriteIndented = true,
	});
}

public class Person : Record
{
	public string? Title { get; set; }
	public Name? Name { get; set; }
	public bool Marketing { get; set; }
}
public class Name
{
	public string? FirstName { get; set; }
	public string? LastName { get; set; }
}
public class ResponsibilityMerge : Record
{
	public bool Marketing { get; set; }
}
public class Group
{
	public bool Marketing { get; set; }
	public int Count { get; set; }
}
```

Then make sure your SurrealDB server is running on 127.0.0.1:8000 and run your app from the command line with:

```
dotnet run
```

### SDK methods

The .NET SDK comes with a number of built-in functions.

<TableComponent data={data} />

<div className='layout-group'>

<div id="new" className='code'>
    <span className='class-name'>new </span>
    <span className='function'>SurrealDbClient</span>
    <span>(endpoint)</span>
</div>

Creates a new client, detecting the right protocol from the endpoint.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>endpoint</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The database endpoint to connect to.
            </td>
        </tr>
                <tr>
            <td colspan="2">
                <code>httpClientFactory</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                An IHttpClientFactory instance.
            </td>
        </tr>
    </tbody>
</table>

```js
// Creates a new client using a local endpoint
var db = new SurrealDbClient("http://localhost:8000");

// Creates a new client using a remote endpoint
var db = new SurrealDbClient("wss://cloud.surrealdb.com");
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="SurrealDbHttpClient" className='code'>
        <span>SurrealDbHttpClient.</span>
        <span className='function'>new</span>
        <span>(host)</span>
    </div>
</div>

Initialises a client using HTTP protocol.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>host</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The database host to connect to.
            </td>
        </tr>
                <tr>
            <td colspan="2">
                <code>httpClientFactory</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                An IHttpClientFactory instance.
            </td>
        </tr>
    </tbody>
</table>

```js
var db = SurrealDbHttpClient.New("localhost:8000");
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="SurrealDbHttpsClient" className='code'>
        <span>SurrealDbHttpsClient.</span>
        <span className='function'>new</span>
        <span>(host)</span>
    </div>
</div>

Initialises a client using HTTPS protocol.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>host</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The database host to connect to.
            </td>
        </tr>
                <tr>
            <td colspan="2">
                <code>httpClientFactory</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                An IHttpClientFactory instance.
            </td>
        </tr>
    </tbody>
</table>

```js
var db = SurrealDbHttpClient.New("cloud.surrealdb.com");
```
</div>




<div className='layout-group'>

<div className='heading'>
    <div id="SurrealDbWsClient" className='code'>
        <span>SurrealDbWsClient.</span>
        <span className='function'>New</span>
        <span>(host)</span>
    </div>
</div>

Initialises a client using WS protocol.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>host</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The database host to connect to.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>ns</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The table namespace to connect to.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>db</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The table database to connect to.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>username</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The username to connect to (with root access).
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>password</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The password to connect to (with root access).
            </td>
        </tr>
    </tbody>
</table>

```js
var db = SurrealDbWsClient.New("localhost:8000");
```
</div>





<div className='layout-group'>

<div className='heading'>
    <div id="SurrealDbWssClient" className='code'>
        <span>SurrealDbWssClient.</span>
        <span className='function'>New</span>
        <span>(host)</span>
    </div>
</div>

Initialises a client using WSS protocol.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>host</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The database host to connect to.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>ns</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The table namespace to connect to.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>db</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The table database to connect to.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>username</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The username to connect to (with root access).
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>password</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The password to connect to (with root access).
            </td>
        </tr>
    </tbody>
</table>

```js
var db = SurrealDbWssClient.New("cloud.surrealdb.com");
```
</div>




<div className='layout-group'>

<div className='heading'>
    <div id="Configure" className='code'>
        <span>db.</span>
        <span className='function'>Configure</span>
        <span>(ns, db, credentials)</span>
    </div>
</div>

Configures the client to use a specific namespace and database, with credentials.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>ns</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The table namespace to use.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>db</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The table database to use.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>username</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The username with root access.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>password</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The password with root access.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>token</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The value of the JWT token.
            </td>
        </tr>
    </tbody>
</table>

```js
// Configure a connection to use ns/db
client.Configure("ns", "db");

// Configure a connection to use ns/db, as well as root access (with username and password)
client.Configure("ns", "db", "root", "root");

// Configure a connection to use ns/db, as well as user auth via JWT token
string token = "eyJhbGciOiJIUzI1...";
client.Configure("ns", "db", token);
```
</div>







<div className='layout-group'>

<div className='heading'>
    <div id="close" className='code'>
        <span className='function'>await</span>
        <span> db.</span>
        <span className='function'>Connect</span>
        <span>()</span>
    </div>
</div>

Connects the client to the underlying endpoint, also improving performance to avoid cold starts.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

```js
await db.Connect();
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Use" className='code'>
        <span className='function'>await </span>
        <span>db.</span>
        <span className='function'>Use</span>
        <span>(ns, db)</span>
    </div>
</div>

Switch to a specific namespace and database.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>ns</code>
                <l className='yellow'>INITIALLY REQUIRED</l>
            </td>
            <td>
                Switches to a specific namespace.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>db</code>
                <l className='yellow'>INITIALLY REQUIRED</l>
            </td>
            <td>
                Switches to a specific database.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='yellow'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

```js
await db.Use("test", "test");
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="SignUp" className='code'>
        <span className='function'>await</span>
        <span> db.</span>
        <span className='function'>SignUp</span>
        <span>(credentials)</span>
    </div>
</div>

Signs up to a specific authentication scope.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>credentials</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Credentials to sign up as a scoped user.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

```
var authParams = new AuthParams
{
    Namespace = "test",
    Database = "test",
    Scope = "user",
    Email = "info@surrealdb.com",
    Password = "123456"
};

Jwt jwt = await db.SignUp(authParams);

public class AuthParams : ScopeAuth
{
	public string? Username { get; set; }
	public string? Email { get; set; }
	public string? Password { get; set; }
}
```
</div>


<div className='layout-group'>

<div className='heading'>
    <div id="SignIn" className='code'>
        <span className='function'>await</span>
        <span> db.</span>
        <span className='function'>SignIn</span>
        <span>(credentials)</span> 
    </div>
</div>

Signs in to a specific authentication scope.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>credentials</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Variables used in a signin query.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

```
// Option 1: Sign in as root user
await db.SignIn(new RootAuth { Username = "root", Password = "root" });

// Option 2: Sign in using namespace auth
await db.SignIn(
    new NamespaceAuth
    {
        Namespace = "test", 
        Username = "johndoe", 
        Password = "password123" 
    }
);

// Option 3: Sign in using database auth
await db.SignIn(
    new DatabaseAuth
    {
        Namespace = "test", 
        Database = "test", 
        Username = "johndoe", 
        Password = "password123" 
    }
);

// Option 4: Sign in as a scoped used
var authParams = new AuthParams
{
    Namespace = "test",
    Database = "test",
    Scope = "user",
    Email = "info@surrealdb.com",
    Password = "123456"
};

Jwt jwt = await db.SignIn(authParams);

public class AuthParams : ScopeAuth
{
	public string? Username { get; set; }
	public string? Email { get; set; }
	public string? Password { get; set; }
}
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Authenticate" className='code'>
        <span className='function'>await </span>
        <span>db</span>
        <span>.</span>
        <span className='function'>Authenticate</span>
        <span>(jwt)</span>
    </div>
</div>

Authenticates the current connection with a JWT token.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>jwt</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The JWT object holder of the authentication token.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

```js
// Sign in or sign up as a scoped user
Jwt jwt = await db.SignUp(authParams);

await db.Authenticate(jwt);
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="signin" className='code'>
        <span className='function'>await </span>
        <span>db.</span>
        <span className='function'>Invalidate</span>
        <span>()</span>
    </div>
</div>

Invalidates the authentication for the current connection.

<table>
    <thead>
        <tr>
            <th colspan="2">Properties</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

```js
db.Invalidate();
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Set" className='code'>
        <span className='function'>await </span>
        <span>db</span>
        <span>.</span>
        <span className='function'>Set</span>
        <span>(key, val)</span>
    </div>
</div>

Assigns a value as a parameter for this connection.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>key</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Specifies the name of the variable.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>value</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Assigns the value to the variable name.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

```js
// Assign the variable on the connection
await db.Set("name", new Name { FirstName = "Tobie", LastName = "Morgan Hitchcock" });

// Use the variable in a subsequent query
await db.Query("CREATE person SET name = $name");

// Use the variable in a subsequent query
await db.Query("SELECT * FROM person WHERE name.first_name = $name.first_name");
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Unset" className='code'>
        <span className='function'>await </span>
        <span>db</span>
        <span>.</span>
        <span className='function'>Unset</span>
        <span>(key)</span>
    </div>
</div>

Removes a parameter for this connection.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>key</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Specifies the SurrealQL statements.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

```js
await db.Unset("name");
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Query" className='code'>
        <span className='function'>await </span>
        <span>db.</span>
        <span className='function'>Query</span>
        <span>(sql, params)</span>
    </div>
</div>

Runs a set of SurrealQL statements against the database.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>sql</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Specifies the SurrealQL statements.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>params</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                Assigns variables which can be used in the query.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

```js
// Assign the variable on the connection
var params = new Dictionary<string, object> { { "table", "person" } };
var result = await db.Query("CREATE person; SELECT * FROM type::table($table);", params);

// Get the first result from the first query
var created = result.GetValue<Person>(0);

// Get all of the results from the second query
var people = result.GetValue<List<Person>>(1);
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Select" className='code'>
        <span className='function'>await </span>
        <span>db.</span>
        <span className='function'>Select</span>
        <span>(resource)</span>
    </div>
</div>

Selects all records in a table, or a specific record, from the database.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>resource</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or a record ID to select.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

```js
// Select all records from a table
var people = await db.Select<Person>("person");

// Select a specific record from a table
var person = await db.Select<Person>("person", "h5wxrf2ewk8xjxosxtyc");

// Select a specific record from a table, equivalent to the above
var thing = new Thing("person", "h5wxrf2ewk8xjxosxtyc");
var person = await db.Select<Person>(thing);

// Select a specific record from a table, given a non-string id
var thing = Thing.From("person", new Guid("8424486b-85b3-4448-ac8d-5d51083391c7"));
var person = await db.Select<Person>(thing);
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Create" className='code'>
        <span className='function'>await </span>
        <span>db.</span>
        <span className='function'>Create</span>
        <span>(resource, data)</span>
    </div>
</div>

Creates a record in the database.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>resource</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or the specific record ID to create.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The document / record data to insert.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

```js
// Create a record with a random ID
var person = await db.Create<Person>("person");

// Create a record with a random ID & specific fields
var person = await db.Create("person", new Person { Name = "Tobie" });

// Create a record with a specific ID
var personToCreate = new Person
{
    Id = new Thing("person", "tobie"),
    Name = "Tobie",
    Settings = new Settings
    {
        Active = true,
        Marketing = true,
    },
};
var result = await db.Create(personToCreate);
```

</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Upsert" className='code'>
        <span className='function'>await </span>
        <span>db.</span>
        <span className='function'>Upsert</span>
        <span>(data)</span>
    </div>
</div>

Creates or updates a specific record.

:::note
<em>NOTE: </em>This function creates a new document / record or replaces the current one with the specified data.
:::

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The document / record data to insert.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

```js
var person = new Person
{
    Id = new Thing("person", "tobie"), // Id is mandatory to apply create or update
    Name = "Tobie",
    Settings = new Settings
    {
        Active = true,
        Marketing = true,
    },
};

// Create a new record when it doesn't exist
var created = await db.Upsert(person);

// Update an existing record when it does exist
var updated = await db.Upsert(person);
```

</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Merge" className='code'>
        <span className='function'>await </span>
        <span>db</span>
        <span>.</span>
        <span className='function'>Merge</span>
        <span>(resource, data)</span>
    </div>
</div>

Modifies all records in a table, or a specific record.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>resource</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or the specific record ID to modify.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The data with which to modify the records.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

```js
// Only changes the fields specified in the merge object
var merge = new PersonMerge
{
    Id = new Thing("person", "tobie"),
    Settings = new Settings
    {
        Active = true,
        Marketing = false,
    },
};
var result = await db.Merge<PersonMerge, Person>(merge);

// Only changes the fields specified in the Dictionary
var thing = new Thing("person", "tobie");
var data = new Dictionary<string, object>
{
    { "tags", new List<string> { "developer", "engineer" } }
};

var result = await db.Merge<Person>(thing, data);
```

</div>



<div className='layout-group'>

<div className='heading'>
    <div id="Delete" className='code'>
        <span className='function'>await </span>
        <span>db.</span>
        <span className='function'>Delete</span>
        <span>(resource)</span>
    </div>
</div>

Deletes all records in a table, or a specific record, from the database.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>resource</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or a record ID to select.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

```js
// Delete all records from a table
await db.Delete("person");

// Delete a specific record from a table
await db.Delete("person", "h5wxrf2ewk8xjxosxtyc");

// Delete a specific record from a table, equivalent to the above
var thing = new Thing("person", "h5wxrf2ewk8xjxosxtyc");
await db.Delete(thing);
```

</div>


<div className='layout-group'>

<div className='heading'>
    <div id="Version" className='code'>
        <span className='function'>await </span>
        <span>db.</span>
        <span className='function'>Version</span>
        <span>()</span>
    </div>
</div>

Retrieves the version of the SurrealDB instance.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

```js
string version = await db.Version(); // Will return "surrealdb-1.0.0-beta.9+20230402.5eafebd"
```

</div>

<div className='layout-group'>

<div className='heading'>
    <div id="Health" className='code'>
        <span className='function'>await </span>
        <span>db.</span>
        <span className='function'>Health</span>
        <span>()</span>
    </div>
</div>

Checks the status of the database server and storage engine.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>cancellationToken</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The cancellationToken enables graceful cancellation of asynchronous operations.
            </td>
        </tr>
    </tbody>
</table>

```js
bool status = await db.Health();
```

</div>

### Dependancy Injection

The .NET SDK also support Dependency Injection to ease the use of the SurrealDbClient in your application.

Let's start by creating a new ASP.NET Core web app.

```
dotnet new webapp -o SurrealDbWeatherApi
cd SurrealDbWeatherApi
dotnet add package SurrealDb.Net
```

Open appsettings.Development.json and replace everything in there with the following code. We have added a new Connection String called SurrealDB with the default configuration.

```bash
{
  "AllowedHosts": "*",
  "Logging": {
    "LogLevel": {
    "Default": "Information",
    "Microsoft.AspNetCore": "Warning"
    }
  },
  "ConnectionStrings": {
    "SurrealDB": "Server=http://localhost:8000;Namespace=test;Database=test;Username=root;Password=root"
  }
}
```

Open Program.cs and replace everything in there with the following code. This code is using the AddSurreal() extension method to inject services automatically. Notice that all we have to do is one line of code to configure the SurrealDB client with the previously set Connection String.

:::note
<em>NOTE:</em> By default, this function will register both ISurrealDbClient and SurrealDbClient using the Singleton service lifetime.
:::

```js
var builder = WebApplication.CreateBuilder(args);

var services = builder.Services;
var configuration = builder.Configuration;

services.AddControllers();
services.AddEndpointsApiExplorer();
services.AddSwaggerGen();
services.AddSurreal(configuration.GetConnectionString("SurrealDB"));

var app = builder.Build();

if (app.Environment.IsDevelopment())
{
	app.UseSwagger();
	app.UseSwaggerUI();
}

app.UseHttpsRedirection();
app.UseAuthorization();

app.MapControllers();

app.Run();
```

Open WeatherForecastController.cs and replace everything in there with the following code. Finally, we can inject the ISurrealDbClient inside our Controller.

```js
using Microsoft.AspNetCore.Mvc;

namespace SurrealDbWeatherApi.Controllers;

[ApiController]
[Route("[controller]")]
public class WeatherForecastController : ControllerBase
{
	private const string Table = "weatherForecast";

	private readonly ISurrealDbClient _surrealDbClient;

	public WeatherForecastController(ISurrealDbClient surrealDbClient)
	{
		_surrealDbClient = surrealDbClient;
	}

	[HttpGet]
	[Route("/")]
	public Task<List<WeatherForecast>> GetAll(CancellationToken cancellationToken)
	{
		return _surrealDbClient.Select<WeatherForecast>(Table, cancellationToken);
	}

	[HttpPost]
	[Route("/")]
	public Task<WeatherForecast> Create(CreateWeatherForecast data, CancellationToken cancellationToken)
	{
		var weatherForecast = new WeatherForecast
		{
			Date = data.Date,
			Country = data.Country,
			TemperatureC = data.TemperatureC,
			Summary = data.Summary
		};

		return _surrealDbClient.Create(Table, weatherForecast, cancellationToken);
	}

    // ...
	// Other methods omitted for brevity
}

public class CreateWeatherForecast
{
	public DateTime Date { get; set; }
	public string? Country { get; set; }
	public int TemperatureC { get; set; }
	public string? Summary { get; set; }
}
```

Then make sure your SurrealDB server is running on 127.0.0.1:8000 and run your app from the command line with:

```
dotnet run
```

### Connection Strings

Connection Strings are an easy way to configure your application to connect to a SurrealDB instance. They are stored in the appsettings.json file and can be used to configure the SurrealDbClient.

In general, it is known as a best practice to:
set a development Connection String in appsettings.Development.json,
store your production Connection String in a Secret environment variable, or even better in a Vault.

<table>
    <thead>
        <tr>
            <th colspan="2">Keys</th>
            <th>Description</th>
            <th>Aliases</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>Endpoint</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The database endpoint to connect to.
            </td>
            <td colspan="2">
                Server
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>Namespace</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                Switches to a specific namespace.
            </td>
            <td colspan="2">
                NS
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>Database</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                Switches to a specific database.
            </td>
            <td colspan="2">
                DB
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>Username</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                Username used to have root access.
            </td>
            <td colspan="2">
                User
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>Password</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                Password used to have root access.
            </td>
            <td colspan="2">
                Pass
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>Token</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                Token (JWT) used to have user access.
            </td>
            <td colspan="2">
                
            </td>
        </tr>
    </tbody>
</table>


Here is a couple of examples of Connection Strings:

```
Server=http://localhost:8000;Namespace=test;Database=test;Username=root;Password=root
```

```
Endpoint=http://localhost:8000;NS=test;DB=test;User=root;Pass=root
```