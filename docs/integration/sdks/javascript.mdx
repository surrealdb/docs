---
sidebar_position: 9
slug: /Integration/sdks/javascript
---

import TableComponent from '../../../src/components/TableData/TableComponent';
import { data } from '../../../src/components/TableData/JavascriptSDK/TableData';
import JSLogo from '../../../static/img/javascript-icon.png';

# Javascript

# <img src={JSLogo} width="50"/> Javascript SDK for SurrealDB

The SurrealDB SDK for JavaScript enables simple and advanced querying of a remote database from a browser or from server-side code. All connections to SurrealDB are made over WebSockets, and automatically reconnect when the connection is terminated.

To contribute to this documentation, edit this file on GitHub.

To contribute to the SDK code, submit an Issue or Pull Request here.

:::note
<em>NOTE: </em>This SDK is compatible with V1.0.0
:::

### Install the SDK

First, install the SurrealDB SDK using npm:

```
npm install --save surrealdb.js
```

Alternatively, you can use install the SurrealDB SDK using yarn, pnpm or similar:

```
yarn add surrealdb.js
pnpm install surrealdb.js
```

### Connect to SurrealDB

Create a new app.js file and add the following code to try out some basic operations using the SurrealDB SDK.

```js
import { Surreal } from 'surrealdb.js';

const db = new Surreal();

async function main() {
	try {
		// Connect to the database
		await db.connect('http://127.0.0.1:8000/rpc', {
			// Set the namespace and database for the connection
			namespace: 'test',
			database: 'test',

			// Set the authentication details for the connection
			auth: {
				namespace: 'test',
				database: 'test',
				scope: 'user',
				username: 'info@surrealdb.com',
				password: 'my-secret-password',
			},
		});

		// Create a new person with a random id
		const created = await db.create('person', {
			title: 'Founder & CEO',
			name: {
				first: 'Tobie',
				last: 'Morgan Hitchcock',
			},
			marketing: true,
			identifier: Math.random().toString(36).substr(2, 10),
		});

		// Update a person record with a specific id
		const updated = await db.merge('person:jaime', {
			marketing: true,
		});

		// Select all people records
		const people = await db.select('person');

		// Perform a custom advanced query
		const groups = await db.query(
			'SELECT marketing, count() FROM type::table($tb) GROUP BY marketing',
			{
				tb: 'person',
			}
		);
	} catch (e) {
		console.error('ERROR', e);
	}
}

main();
```

Then run your app from the command line with:

```
node app.js
```

### SDK methods

The JavaScript SDK comes with a number of built-in functions.

<TableComponent data={data} />

<div className='layout-group'>

<div id="connect" className='code'>
    <span className='class-name'>async </span>
    <span>db.</span>
    <span className='function'>connect</span>
    <span>(url, options)</span>
</div>

Connects to a local or remote database endpoint.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>url</code>
            </td>
            <td>
                The url of the database endpoint to connect to.
            </td>
        </tr>
                <tr>
            <td colspan="2">
                <code>options</code>
            </td>
            <td>
                An object with options to initiate the connection to SurrealDB.
            </td>
        </tr>
    </tbody>
</table>

```js
// Connect to a local endpoint
await db.connect('http://127.0.0.1:8000/rpc');

// Connect to a remote endpoint
await db.connect('https://cloud.surrealdb.com/rpc');

// Specify a namespace and database pair to use
await db.connect('https://cloud.surrealdb.com/rpc', {
	namespace: 'surrealdb',
	database: 'docs',
});

// Authenticate with an existing token
// The .authenticate() function is used under the hood.
await db.connect('https://cloud.surrealdb.com/rpc', {
	auth: '.....',
});

// Authenticate using a pair of credentials
await db.connect('https://cloud.surrealdb.com/rpc', {
	auth: {
		username: 'root',
		password: 'surrealdb',
	},
});

// Use advanced custom logic to prepare the connection to the database
await db.connect('https://cloud.surrealdb.com/rpc', {
	prepare: async (db) => {
		await db.use({ namespace: 'surrealdb', database: 'docs' });

		const token = await retrieveToken();
		if (token) await db.authenticate(token);

		// Any queries executed before the .prepare() function finishes will be forced to wait
		// Please note that this is also the case for queries executed within the prepare function
		// Doing so can cause the connection to stay in a initializing state
	},
});
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="wait" className='code'>
        <span>async </span>
        <span>db.</span>
        <span className='function'>wait</span>
        <span>()</span>
    </div>
</div>

Waits for the connection to the database to succeed.

```js
await db.wait();
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="close" className='code'>
        <span className='function'>async</span>
        <span> db. </span>
        <span className='function'>close</span>
        <span>()</span>
    </div>
</div>

Closes the persistent connection to the database.

```js
await db.close();
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="use" className='code'>
        <span>db.</span>
        <span className='function'>use</span>
        <span>({` { namespace, database } `})</span>
    </div>
</div>

Switch to a specific namespace and database. If only the ns or db property is specified, the current connection details will be used to fill the other property.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>namespace</code>
                <l className='yellow'>INITIALLY REQUIRED</l>
            </td>
            <td>
                Switches to a specific namespace.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>database</code>
                <l className='yellow'>INITIALLY REQUIRED</l>
            </td>
            <td>
                Switches to a specific database.
            </td>
        </tr>
    </tbody>
</table>

```js
await db.use({ namespace: 'surrealdb', database: 'docs' });
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="info" className='code'>
        <span className='function'>async</span>
        <span> db.</span>
        <span className='function'>info</span>
        <span className="t-generic"> T </span>
        <span>()</span>
    </div>
</div>

This method returns the record of an authenticated scope user.

```js
const user = await db.info();
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="signup" className='code'>
        <span className='function'>async </span>
        <span>db.</span>
        <span className='function'>signup</span>
        <span>({`{ namespace, database, scope, [...] }`})</span>
    </div>
</div>

Signs up to a specific authentication scope.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>namespace</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The namespace to sign up to
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>database</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The database to sign up to
            </td>
        </tr>
                <tr>
            <td colspan="2">
                <code>scope</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The scope to sign up to. Also pass any variables used in the scope
            </td>
        </tr>
    </tbody>
</table>

```js
const token = await db.signup({
	namespace: 'surrealdb',
	database: 'docs',
	scope: 'user',

	// Also pass any properties required by the scope definition
	email: 'info@surrealdb.com',
	pass: '123456',
});
```
</div>

<div className='layout-group'>

<div className='heading'>
    <div id="signin" className='code'>
        <span className='function'>async </span>
        <span>db.</span>
        <span className='function'>signin</span>
        <span>({`{ ... }`})</span>
    </div>
</div>

Signs in to a root, namespace, database or scope user.

<table>
    <thead>
        <tr>
            <th colspan="2">Properties</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>username</code>
                <l className='yellow'>REQUIRED FOR ROOT, NAMESPACE & DATABASE</l>
            </td>
            <td>
                The username of the database user
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>password</code>
                <l className='yellow'>REQUIRED FOR ROOT, NAMESPACE & DATABASE</l>
            </td>
            <td>
                The password of the database user
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>namespace</code>
                <l className='yellow'>REQUIRED FOR DATABASE & SCOPE</l>
            </td>
            <td>
                The namespace to sign in to
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>database</code>
                <l className='yellow'>REQUIRED FOR SCOPE</l>
            </td>
            <td>
                The database to sign in to
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>scope</code>
            </td>
            <td>
                The scope to sign in to. Also pass any variables used in the scope
            </td>
        </tr>
    </tbody>
</table>

```js
// Authenticate with a root user
const token = await db.signin({
	username: 'root',
	password: 'surrealdb',
});

// Authenticate with a Namespace user
const token = await db.signin({
	namespace: 'surrealdb',
	username: 'tobie',
	password: 'surrealdb',
});

// Authenticate with a Database user
const token = await db.signin({
	namespace: 'surrealdb',
	database: 'docs',
	username: 'tobie',
	password: 'surrealdb',
});

// Authenticate with a Scope user
const token = await db.signin({
	namespace: 'surrealdb',
	database: 'docs',
	scope: 'user',

	// Also pass any properties required by the scope definition
	email: 'info@surrealdb.com',
	pass: '123456',
});
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="invalidate" className='code'>
        <span className='function'>async </span>
        <span>db.</span>
        <span className='function'>invalidate</span>
        <span>()</span>
    </div>
</div>

Invalidates the authentication for the current connection.

```js
await db.invalidate();
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="authenticate" className='code'>
        <span className='function'>async </span>
        <span>db.</span>
        <span className='function'>authenticate</span>
        <span>(token)</span>
    </div>
</div>

Authenticates the current connection with a JWT token.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>token</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The JWT authentication token.
            </td>
        </tr>
    </tbody>
</table>

```js
await db.authenticate('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJTdXJyZWFsREIiLCJpYXQiOjE1MTYyMzkwMjIsIm5iZiI6MTUxNjIzOTAyMiwiZXhwIjoxODM2NDM5MDIyLCJOUyI6InRlc3QiLCJEQiI6InRlc3QiLCJTQyI6InVzZXIiLCJJRCI6InVzZXI6dG9iaWUifQ.N22Gp9ze0rdR06McGj1G-h2vu6a6n9IVqUbMFJlOxxA');
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="let" className='code'>
        <span className='function'>async </span>
        <span>db.</span>
        <span className='function'>let</span>
        <span>(key, val)</span>
    </div>
</div>

Assigns a value as a parameter for this connection.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>key</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Specifies the name of the variable.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>val</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Assigns the value to the variable name.
            </td>
        </tr>
    </tbody>
</table>

```js
// Assign the variable on the connection
await db.let('name', {
	first: 'Tobie',
	last: 'Morgan Hitchcock',
});

// Use the variable in a subsequent query
await db.query('CREATE person SET name = $name');

// Use the variable in a subsequent query
await db.query('SELECT * FROM person WHERE name.first = $name.first');
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="unset" className='code'>
        <span className='function'>async </span>
        <span>db.</span>
        <span className='function'>unset</span>
        <span>(key)</span>
    </div>
</div>

Removes a parameter for this connection.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>key</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Specifies the name of the variable.
            </td>
        </tr>
    </tbody>
</table>

```js
// Remove the variable from the connection
await db.unset('name');
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="live" className='code'>
        <span className='function'>async </span>
        <span>db.</span>
        <span className='function'>live</span>
        <span className="t-generic"> T </span>
        <span>(table, callback, diff)</span>
    </div>
</div>

Initiates a live query.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>table</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name to listen for changes for
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>callback</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                A callback function that processes live notifications
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>diff</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                If set to true, live notifications will include an array of JSON Patch objects, rather than the entire record for each notification.
            </td>
        </tr>
    </tbody>
</table>

```js
// The uuid of the live query will be returned
const queryUuid = await db.live(
	"person",
	// The callback function takes an object with the 'action' and 'result' properties
	({ action, result }) => {
		// action can be: 'CREATE', 'UPDATE', 'DELETE' or 'CLOSE'
	    if (action === 'CLOSE') return;

		// result contains either the entire record, or a set of JSON patches when diff mode is enabled
		processSomeLiveQueryUpdate(result);
	}
)
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="listenLive" className='code'>
        <span className='function'>async </span>
        <span>db.</span>
        <span className='function'>listenLive</span>
        <span className="t-generic"> T </span>
        <span>(queryUuid, callback)</span>
    </div>
</div>

Registers a callback function for a running live query.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>queryUuid</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The UUID of a running live query
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>callback</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                A callback function that processes live notifications
            </td>
        </tr>
    </tbody>
</table>

```js
await db.listenLive(
	queryUuid,
	// The callback function takes an object with the "action" and "result" properties
	({ action, result }) => {
		// action can be: "CREATE", "UPDATE", "DELETE" or "CLOSE"
	    if (action === 'CLOSE') return;

		// result contains either the entire record, or a set of JSON patches when diff mode is enabled
		processSomeLiveQueryUpdate(result);
	}
)
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="kill" className='code'>
        <span className='function'>async </span>
        <span>db.</span>
        <span className='function'>kill</span>
        <span>(queryUuid)</span>
    </div>
</div>

Kills a running live query by it's UUID

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>queryUuid</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The UUID of the live query you wish to kill
            </td>
        </tr>
    </tbody>
</table>

```js
await db.kill(queryUuid)
```

</div>



<div className='layout-group'>

<div className='heading'>
    <div id="query" className='code'>
        <span className='function'>async </span>
        <span>db.</span>
        <span className='function'>query</span>
        <span className="t-generic"> T </span>
        <span>(query, vars)</span>
    </div>
</div>

Runs a set of SurrealQL statements against the database.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>query</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                Specifies the SurrealQL statements.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>vars</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                Assigns variables which can be used in the query.
            </td>
        </tr>
    </tbody>
</table>

```js
type Person = {
	id: string;
	name: string;
};

// Assign the variable on the connection
const result = await db.query<[Person[], Person[]]>(
	'CREATE person SET name = "John"; SELECT * FROM type::table($tb);',
	{ tb: 'person' }
);

// Get the first result from the first query
const created = result[0].result[0];

// Get all of the results from the second query
const people = result[1].result;
```

</div>



<div className='layout-group'>

<div className='heading'>
    <div id="select" className='code'>
        <span className='function'>async </span>
        <span>db.</span>
        <span className='function'>select</span>
        <span className="t-generic"> T </span>
        <span>(thing)</span>
    </div>
</div>

Selects all records in a table, or a specific record, from the database.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>thing</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or a record ID to select.
            </td>
        </tr>
    </tbody>
</table>

```js
type Person = {
	id: string;
	name: string;
};

// Select all records from a table
const people = await db.select<Person>('person');

// Select a specific record from a table
const [person] = await db.select<Person>('person:h5wxrf2ewk8xjxosxtyc');
```

This function will run the following query in the database.

```
SELECT * FROM $thing;
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="create" className='code'>
        <span className='function'>async </span>
        <span>db.</span>
        <span className='function'>create</span>
        <span className='t-generic'>T, U</span>
        <span>(thing, data)</span>
    </div>
</div>

Creates a record in the database.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>thing</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or a record ID to create.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The document / record data to insert.
            </td>
        </tr>
    </tbody>
</table>

```js
type Person = {
	id: string;
	name: string;
	settings: {
		active: boolean;
		marketing: boolean;
	};
};

// Create a record with a random ID
const [person] = await db.create<Person>('person');

// Create a record with a specific ID
const [record] = await db.create<Person>('person:tobie', {
	name: 'Tobie',
	settings: {
		active: true,
		marketing: true,
	},
});

// The content you are creating the record with might differ from the return type
const [record] = await db.create<
	Person,
	Pick<Person, 'name'>
>('person:tobie', {
	name: 'Tobie',
});
```

This function will run the following query in the database.

```
CREATE $thing CONTENT $data;
```
</div>


<div className='layout-group'>

<div className='heading'>
    <div id="insert" className='code'>
        <span className='function'>async </span>
        <span>db.</span>
        <span className='function'>insert</span>
        <span className='t-generic'>T, U</span>
        <span>(thing, data)</span>
    </div>
</div>

Inserts one or multiple records in the database.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>thing</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name to insert to.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                Either a single document/record or an array of documents/records to insert
            </td>
        </tr>
    </tbody>
</table>

```js
type Person = {
	id: string;
	name: string;
	settings: {
		active: boolean;
		marketing: boolean;
	};
};

// Insert a single record
const [person] = await db.insert<Person>('person', {
	name: 'Tobie',
	settings: {
		active: true,
		marketing: true,
	},
});

// Insert multiple records
const people = await db.insert<Person>('person', [
	{
		name: 'Tobie',
		settings: {
			active: true,
			marketing: true,
		},
	},
	{
		name: 'Jaime',
		settings: {
			active: true,
			marketing: true,
		},
	},
]);

// The content you are creating the record with might differ from the return type
const people = await db.insert<
	Person,
	Pick<Person, 'name'>
>('person', [
	{ name: 'Tobie' },
	{ name: 'Jaime' },
]);
```

This function will run the following query in the database.

```
INSERT INTO $thing $data;
```
</div>

<div className='layout-group'>

<div className='heading'>
    <div id="update" className='code'>
        <span className='function'>async </span>
        <span>db.</span>
        <span className='function'>update</span>
        <span className='t-generic'>T, U</span>
        <span>(thing, data)</span>
    </div>
</div>

Updates all records in a table, or a specific record, in the database.

:::note
<em>NOTE:</em>This function replaces the current document / record data with the specified data.
:::

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>thing</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or the specific record ID to update.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The document / record data to insert.
            </td>
        </tr>
    </tbody>
</table>

```js
type Person = {
	id: string;
	name: string;
	settings: {
		active: boolean;
		marketing: boolean;
	};
};

// Update all records in a table
const people = await db.update<Person>('person');

// Update a record with a specific ID
const [person] = await db.update<Person>('person:tobie', {
	name: 'Tobie',
	settings: {
		active: true,
		marketing: true,
	},
});

// The content you are updating the record with might differ from the return type
const [record] = await db.update<
	Person,
	Pick<Person, 'name'>
>('person:tobie', {
	name: 'Tobie',
});
```

This function will run the following query in the database.

```
UPDATE $thing CONTENT $data;
```
</div>

<div className='layout-group'>

<div className='heading'>
    <div id="merge" className='code'>
        <span className='function'>async </span>
        <span>db.</span>
        <span className='function'>merge</span>
        <span className='t-generic'>T, U</span>
        <span>(thing, data)</span>
    </div>
</div>

Modifies all records in a table, or a specific record, in the database.

:::note
<em>NOTE:</em>This function merges the current document / record data with the specified data.
:::

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>thing</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or the specific record ID to merge.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The document / record data to insert.
            </td>
        </tr>
    </tbody>
</table>

```js
type Person = {
	id: string;
	name: string;
	updated_at: Date;
	settings: {
		active: boolean;
		marketing: boolean;
	};
};

// Update all records in a table
const people = await db.merge<Person>('person', {
	updated_at: new Date(),
});

// Update a record with a specific ID
const [person] = await db.merge<Person>('person:tobie', {
	updated_at: new Date(),
	settings: {
		active: true,
	},
});

// The content you are merging the record with might differ from the return type
const [record] = await db.merge<
	Person,
	Pick<Person, 'name'>
>('person:tobie', {
	name: 'Tobie',
});
```

This function will run the following query in the database.

```
UPDATE $thing MERGE $data;
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="patch" className='code'>
        <span className='function'>async </span>
        <span>db.</span>
        <span className='function'>patch</span>
        <span>(thing, data)</span>
    </div>
</div>

Applies JSON Patch changes to all records, or a specific record, in the database.

:::note
<em>NOTE:</em>This function patches the current document / record data with the specified JSON Patch data.
:::

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>thing</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or the specific record ID to patch.
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <code>data</code>
                <l className='grey'>OPTIONAL</l>
            </td>
            <td>
                The JSON Patch data with which to patch the records.
            </td>
        </tr>
    </tbody>
</table>

```js
// Update all records in a table
const people = await db.patch('person', [
	{ op: 'replace', path: '/created_at', value: new Date() },
]);

// Update a record with a specific ID
const [person] = await db.patch('person:tobie', [
	{ op: 'replace', path: '/settings/active', value: false },
	{ op: 'add', path: '/tags', value: ['developer', 'engineer'] },
	{ op: 'remove', path: '/temp' },
]);
```

This function will run the following query in the database.

```
UPDATE $thing PATCH $data;
```
</div>



<div className='layout-group'>

<div className='heading'>
    <div id="delete" className='code'>
        <span className='function'>async </span>
        <span>db.</span>
        <span className='function'>delete</span>
        <span className='t-generic'>T</span>
        <span>(thing)</span>
    </div>
</div>

Deletes all records in a table, or a specific record, from the database.

<table>
    <thead>
        <tr>
            <th colspan="2">Arguments</th>
            <th>Description</th>
        </tr>
    </thead>  
    <tbody>
        <tr>
            <td colspan="2">
                <code>thing</code>
                <l className='yellow'>REQUIRED</l>
            </td>
            <td>
                The table name or a record ID to delete.
            </td>
        </tr>
    </tbody>
</table>

```js
// Delete all records from a table
await db.delete('person');

// Delete a specific record from a table
await db.delete('person:h5wxrf2ewk8xjxosxtyc');
```

This function will run the following query in the database.

```
DELETE * FROM $thing;
```
</div>